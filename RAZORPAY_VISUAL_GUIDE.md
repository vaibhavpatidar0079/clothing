# ğŸ¯ RAZORPAY INTEGRATION - VISUAL GUIDE

## COMPLETE ARCHITECTURE OVERVIEW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        E-COMMERCE APPLICATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   REACT FRONTEND       â”‚          â”‚   DJANGO BACKEND         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                        â”‚          â”‚                          â”‚   â”‚
â”‚  â”‚  CheckoutPage.jsx      â”‚          â”‚  store/views.py          â”‚   â”‚
â”‚  â”‚  â”œâ”€ Product List      â”‚â”€â”€POSTâ”€â”€â”€â”€>â”‚  â”œâ”€ OrderViewSet.create  â”‚   â”‚
â”‚  â”‚  â”œâ”€ Cart Review       â”‚ /orders/  â”‚  â”‚   â””â”€ Initialize Razorpay
â”‚  â”‚  â”œâ”€ Address Form      â”‚          â”‚  â”‚                        â”‚   â”‚
â”‚  â”‚  â””â”€ Payment Method    â”‚          â”‚  â”œâ”€ OrderViewSet          â”‚   â”‚
â”‚  â”‚      â””â”€ RAZORPAY âœ¨   â”‚          â”‚  â”‚   .verify_payment      â”‚   â”‚
â”‚  â”‚                        â”‚<â”€RESPONSE â”‚  â”‚   â””â”€ Verify Signature â”‚   â”‚
â”‚  â”‚                        â”‚          â”‚  â”‚                        â”‚   â”‚
â”‚  â”‚  lib/razorpay.js       â”‚          â”‚  store/utils/            â”‚   â”‚
â”‚  â”‚  â”œâ”€ loadScript()       â”‚          â”‚  razorpay_utils.py       â”‚   â”‚
â”‚  â”‚  â”œâ”€ init Modal()       â”‚â”€â”€POSTâ”€â”€â”€â”€>â”‚  â”œâ”€ Handler.create()    â”‚   â”‚
â”‚  â”‚  â””â”€ verify()           â”‚ /verify   â”‚  â”œâ”€ Handler.verify()    â”‚   â”‚
â”‚  â”‚                        â”‚          â”‚  â””â”€ verify_signature()   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                                        â”‚                 â”‚
â”‚           â”‚                                        â–¼                 â”‚
â”‚           â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚           â”‚                            â”‚  Django Models       â”‚    â”‚
â”‚           â”‚                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚           â”‚                            â”‚  Order                â”‚    â”‚
â”‚           â”‚                            â”‚  â”œâ”€ id               â”‚    â”‚
â”‚           â”‚                            â”‚  â”œâ”€ order_status     â”‚    â”‚
â”‚           â”‚                            â”‚  â”œâ”€ payment_status   â”‚    â”‚
â”‚           â”‚                            â”‚  â”œâ”€ razorpay_order_idâ”‚    â”‚
â”‚           â”‚                            â”‚  â”œâ”€ razorpay_pay_id â”‚    â”‚
â”‚           â”‚                            â”‚  â””â”€ razorpay_sig    â”‚    â”‚
â”‚           â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                        â”‚                 â”‚
â”‚           â–¼                                        â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   RAZORPAY API         â”‚            â”‚   DATABASE           â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                        â”‚            â”‚                      â”‚    â”‚
â”‚  â”‚ 1. Create Order        â”‚            â”‚  SQLite/PostgreSQL   â”‚    â”‚
â”‚  â”‚    â”œâ”€ Amount (paise)   â”‚            â”‚  â”œâ”€ Orders Table    â”‚    â”‚
â”‚  â”‚    â”œâ”€ Currency         â”‚            â”‚  â””â”€ OrderItems       â”‚    â”‚
â”‚  â”‚    â”œâ”€ Receipt ID       â”‚            â”‚                      â”‚    â”‚
â”‚  â”‚    â””â”€ Customer Info    â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚                        â”‚                                          â”‚
â”‚  â”‚ 2. Returns Order ID    â”‚                                          â”‚
â”‚  â”‚ 3. Payment Processing  â”‚                                          â”‚
â”‚  â”‚ 4. Returns Payment ID  â”‚                                          â”‚
â”‚  â”‚ 5. Returns Signature   â”‚                                          â”‚
â”‚  â”‚                        â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DETAILED PAYMENT FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER PAYMENT JOURNEY                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  STEP 1: CHECKOUT PAGE                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚ â”‚ Product List                            â”‚             â”‚   â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚   â”‚
â”‚  â”‚ â”‚ Cart Items                              â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ Item 1: â‚¹1000                        â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ â”œâ”€ Item 2: â‚¹2000                        â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ â””â”€ Total: â‚¹3000                         â”‚             â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚ â”‚ Shipping Address                        â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ 123 Main Street, City, 12345           â”‚             â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚ â”‚ Payment Method Selection                â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ â—‹ Credit/Debit Card (Simulated)        â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ â—‹ GPay/UPI (Simulated)                 â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ â— Razorpay (SELECTED) âœ“                â”‚ â—„â”€â”€â”€ USER   â”‚   â”‚
â”‚  â”‚ â”‚ â—‹ Cash on Delivery                      â”‚ SELECTS    â”‚   â”‚
â”‚  â”‚ â”‚                                         â”‚ RAZORPAY   â”‚   â”‚
â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ â”‚ [PAY â‚¹3000]                         â”‚â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚             â”‚   â”‚
â”‚  â”‚ â”‚                                         â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ Razorpay Info:                          â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ Secure payment with Cards, UPI,        â”‚             â”‚   â”‚
â”‚  â”‚ â”‚ Net Banking, Wallets                    â”‚             â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                      â”‚
â”‚                           â–¼ USER CLICKS PAY                     â”‚
â”‚                                                                  â”‚
â”‚  STEP 2: CREATE ORDER                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Frontend â†’ POST /api/v1/orders/                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ shipping_address_id: 1                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ payment_method: "RAZORPAY"                          â”‚   â”‚
â”‚  â”‚  â””â”€ coupon_code: (optional)                             â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Backend Response:                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ Order ID: "550e8400..."                             â”‚   â”‚
â”‚  â”‚  â”œâ”€ Status: "pending"                                   â”‚   â”‚
â”‚  â”‚  â””â”€ Razorpay Order:                                     â”‚   â”‚
â”‚  â”‚     â”œâ”€ order_id: "order_DBJOWzybf0sJbb"                â”‚   â”‚
â”‚  â”‚     â”œâ”€ key_id: "rzp_live_ExjpAUN3gVHrPJ"               â”‚   â”‚
â”‚  â”‚     â”œâ”€ amount: 300000 (in paise)                        â”‚   â”‚
â”‚  â”‚     â””â”€ customer_email: "user@example.com"              â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                      â”‚
â”‚                           â–¼ LOAD SDK & OPEN MODAL              â”‚
â”‚                                                                  â”‚
â”‚  STEP 3: RAZORPAY MODAL                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚   â”‚
â”‚  â”‚  â•‘        RAZORPAY SECURE PAYMENT GATEWAY        â•‘    â”‚   â”‚
â”‚  â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£    â”‚   â”‚
â”‚  â”‚  â•‘                                                 â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  Order ID: order_DBJOWzybf0sJbb                â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  Amount: â‚¹3000                                 â•‘    â”‚   â”‚
â”‚  â”‚  â•‘                                                 â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  â”‚ [DEBIT/CREDIT CARD]                     â”‚   â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  â”‚ [UPI]                                   â”‚   â•‘ â—„â”€â”€â”¼â”€â”€ USER
â”‚  â”‚  â•‘  â”‚ [NET BANKING]                           â”‚   â•‘    â”‚   â”‚ SELECTS
â”‚  â”‚  â•‘  â”‚ [WALLETS]                               â”‚   â•‘    â”‚   â”‚ PAYMENT
â”‚  â”‚  â•‘  â”‚                                         â”‚   â•‘    â”‚   â”‚ METHOD
â”‚  â”‚  â•‘  â”‚ Card Number: _ _ _ _ _ _ _ _          â”‚   â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  â”‚ Expiry: _ _ / _ _                       â”‚   â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  â”‚ CVV: _ _ _                              â”‚   â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  â”‚                                         â”‚   â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  â”‚ [PAY â‚¹3000]                            â”‚   â•‘    â”‚   â”‚
â”‚  â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘    â”‚   â”‚
â”‚  â”‚  â•‘                                                 â•‘    â”‚   â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                      â”‚
â”‚                           â–¼ USER COMPLETES PAYMENT             â”‚
â”‚                                                                  â”‚
â”‚  STEP 4: PAYMENT PROCESSING                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Razorpay processes payment:                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ Validates card                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ Processes payment                                   â”‚   â”‚
â”‚  â”‚  â”œâ”€ Generates payment ID                                â”‚   â”‚
â”‚  â”‚  â””â”€ Generates signature                                 â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Returns to Frontend:                                   â”‚   â”‚
â”‚  â”‚  â”œâ”€ Payment ID: "pay_DBJOWzybf0sJbb"                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ Order ID: "order_DBJOWzybf0sJbb"                    â”‚   â”‚
â”‚  â”‚  â””â”€ Signature: "9ef4dffbfd84f1318f6739a..."            â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                      â”‚
â”‚                           â–¼ VERIFY WITH BACKEND               â”‚
â”‚                                                                  â”‚
â”‚  STEP 5: SIGNATURE VERIFICATION                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Frontend â†’ POST /api/v1/orders/verify_payment/         â”‚   â”‚
â”‚  â”‚  â”œâ”€ order_id: "550e8400..."                             â”‚   â”‚
â”‚  â”‚  â”œâ”€ razorpay_payment_id: "pay_DBJOWzybf0sJbb"           â”‚   â”‚
â”‚  â”‚  â”œâ”€ razorpay_order_id: "order_DBJOWzybf0sJbb"           â”‚   â”‚
â”‚  â”‚  â””â”€ razorpay_signature: "9ef4dffbfd84f1318..."          â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Backend Verification:                                  â”‚   â”‚
â”‚  â”‚  1. Compute HMAC-SHA256:                                â”‚   â”‚
â”‚  â”‚     â””â”€ hmac(secret, "order_id|payment_id")             â”‚   â”‚
â”‚  â”‚  2. Compare signatures:                                 â”‚   â”‚
â”‚  â”‚     â”œâ”€ Computed: "9ef4dffbfd84f1318..."                â”‚   â”‚
â”‚  â”‚     â”œâ”€ Provided: "9ef4dffbfd84f1318..."                â”‚   â”‚
â”‚  â”‚     â””â”€ âœ“ MATCH!                                         â”‚   â”‚
â”‚  â”‚  3. Update order status:                                â”‚   â”‚
â”‚  â”‚     â”œâ”€ payment_status = "paid"                          â”‚   â”‚
â”‚  â”‚     â”œâ”€ order_status = "processing"                      â”‚   â”‚
â”‚  â”‚     â””â”€ Save to database                                 â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Response: SUCCESS                                      â”‚   â”‚
â”‚  â”‚  â””â”€ Order marked as paid                                â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                      â”‚
â”‚                           â–¼ REDIRECT TO ORDERS                 â”‚
â”‚                                                                  â”‚
â”‚  STEP 6: SUCCESS                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Frontend Actions:                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ Clear shopping cart                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€ Show success notification                           â”‚   â”‚
â”‚  â”‚  â”‚  "Payment successful! Order is being processed."    â”‚   â”‚
â”‚  â”‚  â”œâ”€ Redirect to: /profile?tab=orders                    â”‚   â”‚
â”‚  â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â””â”€ User sees order:                                    â”‚   â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚     â”‚ ORDER #550e8400-e29b-41d4-a716...      â”‚         â”‚   â”‚
â”‚  â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚   â”‚
â”‚  â”‚     â”‚ Status: PROCESSING âœ“                  â”‚         â”‚   â”‚
â”‚  â”‚     â”‚ Payment: PAID âœ“                        â”‚         â”‚   â”‚
â”‚  â”‚     â”‚ Method: Razorpay                       â”‚         â”‚   â”‚
â”‚  â”‚     â”‚ Total: â‚¹3000                           â”‚         â”‚   â”‚
â”‚  â”‚     â”‚ Date: Today                            â”‚         â”‚   â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  âœ… PAYMENT COMPLETE!                                   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## SECURITY VERIFICATION FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            SIGNATURE VERIFICATION (SECURITY)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Razorpay                          Backend                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Processes    â”‚                  â”‚ Receives     â”‚         â”‚
â”‚  â”‚ Payment      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Payment Data â”‚         â”‚
â”‚  â”‚ â”œâ”€ Card      â”‚                  â”‚ & Signature  â”‚         â”‚
â”‚  â”‚ â”œâ”€ Auth      â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ â”œâ”€ Process   â”‚                  â”‚              â”‚         â”‚
â”‚  â”‚ â””â”€ Confirm   â”‚                  â”‚ Computes:    â”‚         â”‚
â”‚  â”‚              â”‚                  â”‚ HMAC-SHA256  â”‚         â”‚
â”‚  â”‚ Returns:     â”‚                  â”‚              â”‚         â”‚
â”‚  â”‚ â”œâ”€ Pay ID    â”‚                  â”‚ Message:     â”‚         â”‚
â”‚  â”‚ â”œâ”€ Order ID  â”‚                  â”‚ "order|pay"  â”‚         â”‚
â”‚  â”‚ â””â”€ Signature â”‚                  â”‚              â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ Secret Key:  â”‚         â”‚
â”‚                                    â”‚ From .env    â”‚         â”‚
â”‚                                    â”‚              â”‚         â”‚
â”‚                                    â”‚ Result:      â”‚         â”‚
â”‚                                    â”‚ âœ“ VALID      â”‚         â”‚
â”‚                                    â”‚              â”‚         â”‚
â”‚                                    â”‚ Update Order:â”‚         â”‚
â”‚                                    â”‚ â”œâ”€ paid      â”‚         â”‚
â”‚                                    â”‚ â”œâ”€ processingâ”‚         â”‚
â”‚                                    â”‚ â””â”€ Save DB   â”‚         â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ERROR HANDLING FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ERROR HANDLING SCENARIOS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Payment Cancelled by User                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ User closes Razorpay modal          â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Frontend triggers error callback    â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Show: "Payment cancelled"           â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ User stays on checkout page         â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Can retry payment                   â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                              â”‚
â”‚  Invalid Signature                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ Backend receives payment data       â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Computes HMAC-SHA256                â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Compare: Computed â‰  Provided        â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Return: Signature verification failedâ”‚                   â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Order NOT marked as paid            â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Frontend shows error                â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ User must contact support           â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                              â”‚
â”‚  Network Error During Payment                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ Frontend can't reach Razorpay       â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Browser shows error message         â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ User can retry                      â”‚                    â”‚
â”‚  â”‚         â–¼                           â”‚                    â”‚
â”‚  â”‚ Check internet connection           â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DATABASE SCHEMA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ORDER TABLE                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ id (UUID)                           â”‚
â”‚ user_id (FK)                        â”‚
â”‚ shipping_address_id (FK)            â”‚
â”‚ total_amount (Decimal)              â”‚
â”‚ tax_amount (Decimal)                â”‚
â”‚ shipping_cost (Decimal)             â”‚
â”‚ discount_amount (Decimal)           â”‚
â”‚ order_status (CharField)            â”‚
â”‚ payment_status (CharField)          â”‚
â”‚ payment_method (CharField)          â”‚
â”‚                                     â”‚
â”‚ âœ¨ NEW RAZORPAY FIELDS:             â”‚
â”‚ razorpay_order_id (CharField)       â”‚
â”‚ razorpay_payment_id (CharField)     â”‚
â”‚ razorpay_signature (CharField)      â”‚
â”‚                                     â”‚
â”‚ created_at (DateTime)               â”‚
â”‚ updated_at (DateTime)               â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DEPLOYMENT CHECKLIST

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                DEPLOYMENT CHECKLIST                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ BEFORE TESTING:                                             â”‚
â”‚ â˜ pip install razorpay                                      â”‚
â”‚ â˜ .env configured with keys                                 â”‚
â”‚ â˜ python manage.py migrate store                            â”‚
â”‚ â˜ Backend running (no errors)                               â”‚
â”‚ â˜ Frontend running (no errors)                              â”‚
â”‚                                                              â”‚
â”‚ TESTING PHASE:                                              â”‚
â”‚ â˜ Can reach checkout page                                   â”‚
â”‚ â˜ Can select Razorpay option                                â”‚
â”‚ â˜ Can click Pay button                                      â”‚
â”‚ â˜ Modal opens successfully                                  â”‚
â”‚ â˜ Test payment completes                                    â”‚
â”‚ â˜ Order marked as paid                                      â”‚
â”‚ â˜ Cart cleared                                              â”‚
â”‚ â˜ Redirected to orders                                      â”‚
â”‚                                                              â”‚
â”‚ BEFORE PRODUCTION:                                          â”‚
â”‚ â˜ Get live API keys                                         â”‚
â”‚ â˜ Update .env with live keys                                â”‚
â”‚ â˜ Enable HTTPS                                              â”‚
â”‚ â˜ Test with live keys (test mode)                           â”‚
â”‚ â˜ Configure CORS                                            â”‚
â”‚ â˜ Set up monitoring                                         â”‚
â”‚ â˜ Have backup plan                                          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Visual Guides Complete!** âœ…

These diagrams show:
- Complete architecture
- Full payment flow
- Security verification
- Error handling
- Database schema
- Deployment checklist
